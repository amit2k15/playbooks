#!/bin/bash

# Check if all arguments are provided
if [ "$#" -ne 3 ]; then
    echo "Usage: $0 servername username password"
    exit 1
fi

# Assign arguments to variables
SERVER="$1"
USERNAME="$2"
PASSWORD="$3"

# Function to check if password is valid
check_password() {
    # Try to SSH into the server using sshpass
    sshpass -p "$PASSWORD" ssh -o BatchMode=yes -o ConnectTimeout=5 "$USERNAME"@"$SERVER" "echo success" 2>/dev/null
    
    # Check the exit status of the SSH command
    if [ $? -eq 0 ]; then
        echo "Password is working."
    else
        echo "Password is NOT working."
    fi
}

# Call the function to check the password
check_password
